<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kkutu</title>
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="stylesheet" href="styles.css"> <!-- Link to external CSS -->
  <style>
      /* === GLOBAL === */
      body {
        font-family: 'Ubuntu', Arial, sans-serif;
        background: linear-gradient(135deg, #1e1e2e, #313244);
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        color: #cdd6f4;
      }

      /* === HEADER === */
      header {
        background: #45475a;
        color: #cba6f7;
        padding: 1rem 2rem;
        text-align: center;
        box-shadow: 0 4px 10px rgba(17, 17, 27, 0.5);
      }

      /* === MAIN === */
      main {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem;
        text-align: center;
      }

      /* === TITLES === */
      h1, h2 {
        margin: 0.5rem 0;
        color: #89b4fa;
      }
      #entries::-webkit-scrollbar {
          width: 0;           /* completely hide */
          background: transparent;
      }


      /* For Firefox */
      #entries {
          scrollbar-width: none;
      }
      #mostRecentWord {
        font-size: 3rem;
        color: #94e2d5;
        text-shadow: 2px rgba(148, 226, 213, 0.25);
      }

      #secondRecentWord {
        font-size: 2rem;
        color: #89b4fa;
      }
      @keyframes textChange {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        50% {
          opacity: 1;
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .word-change {
        animation: textChange 0.4s ease forwards;
      }
      /* === INPUT BOX === */
      #fname {
        font-family: inherit;
        width: 60%;
        max-width: 400px;
        padding: 0.8rem 1rem;
        font-size: 1.1rem;
        background: #313244;
        border: 2px solid #94e2d5;
        border-radius: 12px;
        color: #cdd6f4;
        outline: none;
        margin-top: 1.5rem;
        transition: all 0.3s ease;
      }

      #fname:focus {
        border-color: #89b4fa;
        box-shadow: 0 0 10px rgba(137, 180, 250, 0.5);
        background: #45475a;
      }

      /* === SCORE DISPLAY === */
      #scoreDisplay {
        margin-top: 1rem;
        font-size: 1.3rem;
        background: #313244;
        color: #a6e3a1;
        padding: 0.5rem 1.2rem;
        border-radius: 10px;
        text-align: center;
        width: 50px;
        box-shadow: 0 2px 8px rgba(17, 17, 27, 0.4);
      }
      #timerDisplay {
        margin-top: 0rem;
        font-size: 1.3rem;
        background: #313244;
        color: #a6e3a1;
        width: 50px;
        padding: 0.5rem 1.2rem;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(17, 17, 27, 0.4);
      }
      /* === ERROR MESSAGE === */
      #error {
        color: #f38ba8;
        font-weight: bold;
        margin-top: 0.8rem;
        min-height: 1.5em;
      }

      /* === ENTRIES LIST === */
      #entries {
        height: 180px;
        list-style: none;
        padding: 0;
        overflow-y: auto;
        margin-top: 2rem;
        width: 80%;
        max-width: 200px;
      }
      #entries li {
        background: #313244;
        margin: 0.5rem 0;
        padding: 0.7rem 1rem;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(17, 17, 27, 0.3);
        font-size: 1.1rem;
        
        opacity: 0;               /* start invisible */
        transform: translateY(-10px);  /* start slightly above */
        transition: all 0.4s ease-out; /* smooth transition */
      }

      #entries li.show {
        opacity: 1;               /* fade in */
        transform: translateY(0); /* slide down */
      }
      /* === FOOTER === */
      footer {
        background: #1e1e2e;
        color: #6c7086;
        text-align: center;
        padding: 0.3rem;
        font-size: 0.9rem;
      }


   </style>
   <script src="script.js"></script> <!-- Link to external JavaScript -->
</head>
<body>
   <header>
       <h1>Kkutu</h1>
   </header>
   <main>
      <h1 id="mostRecentWord">~~~</h1> <!-- This is the most recent word-->
      <h2 id="secondRecentWord">~~~</h2> <!-- This is the most recent word-->
      <input type="text" id="fname" placeholder= "First letter &#8594 previous word's last letter">
      <ul id="entries"></ul> <!-- where all entries will appear -->


       <p id ="scoreDisplay">0/0</p>
       <p id ="timerDisplay">60</p>
      <h1 id="error" style="color:red"></h1>
              <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RNHLEQX9J1"></script>
<script>
    
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RNHLEQX9J1');
</script>

<script>
  const input = document.getElementById('fname');

  const entries = document.getElementById('entries');

  const mostRecentWord = document.getElementById('mostRecentWord');
  const secondRecentWord = document.getElementById('secondRecentWord');

  const scoreDisplay = document.getElementById('scoreDisplay');

  const timerDisplay = document.getElementById('timerDisplay');
  let timerValue = 60; //<- UPDATE THIS TO CHANGE TIME GIVEN!!!!

  const error = document.getElementById('error');
  
  let score = 0;

  let isDone = false;
  
  let entriesList = [];
  let wordList = [];
  
  fetch('words_dictionary.json') // JSON file in the same directory
    .then(response => response.json()) // parse JSON
    .then(data => {
      wordList = data; // now myList contains the JSON contents
      mostRecentWord.textContent = wordList[Math.floor(Math.random() * wordList.length)];
    })
    .catch(error => console.error('Error loading JSON:', error));

  function animateTextChange(element, newText) {
    element.classList.remove('word-change');   // reset animation
    void element.offsetWidth;                  // trigger reflow
    element.textContent = newText;            // change text
    element.classList.add('word-change');     // start animation
  }

  function printOutFull(){
    let ret = entriesList[0].charAt(0);
    for (let i = 0; i < entriesList.length; i++){
      ret += entriesList[i].substring(1)
    }
    return ret;
  }
  
  async function iterateTimer(){
    while (timerValue > 0){
      await new Promise(resolve => setTimeout(resolve, 1000));
      timerDisplay.textContent = timerValue -= 1;
      if (timerValue < 10){
        timerDisplay.style.color = "#f38ba8";
      }
    }
    isDone = true;
  }

  iterateTimer();
  
  input.addEventListener('keydown', function(event) {
    if (isDone){
      return;
    }
    if (event.key === 'Enter' && input.value.trim() !== '') {
      const li = document.createElement('li');

      li.textContent = input.value;


      //refactored to allow easier addition of errors.
      if (input.value.includes(" ")){
        error.textContent = "No Spaces"
      }
      else if (input.value.length < 3){
        error.textContent = "Too short"
      }
      else if (mostRecentWord.textContent[mostRecentWord.textContent.length - 1] != input.value[0]){
        error.textContent = "Wrong Letter"
      }
      else if (entriesList.includes(input.value)){
        error.textContent = "Duplicate Word"
      }
      else if (!wordList.includes(input.value.toLowerCase())){
        error.textContent = "Not Valid English"
      }
      else
      {
        animateTextChange(secondRecentWord, mostRecentWord.textContent);
        animateTextChange(mostRecentWord, input.value);

        score += mostRecentWord.textContent.length
        scoreDisplay.textContent = score + "/" + (entriesList.length + 1);

        error.textContent = "            "

        entries.prepend(li);
        requestAnimationFrame(() => {
          li.classList.add('show');
        });
        
        entriesList.push(input.value);
        console.log(entriesList);
      }

    input.value = ''; // clear box

    }
  });
</script>
   </main>
   <footer>
       <p>&copy 2025 Waluigi6, Frenchythefry, 1orenzo, and JayJeongEdits. Uses colors from catpuccin mocha theme</p>
   </footer>
</body>
</html>
